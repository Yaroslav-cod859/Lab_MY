#include <stdio.h>   // підключаємо бібліотеку для вводу/виводу (printf, scanf)
#include <stdlib.h>  // стандартна бібліотека (використовується для exit та ін.)
#include <math.h>    // бібліотека для математичних функцій (pow, sqrt, sin і т.д.)

// функція для обчислення f(x) за формулою варіанту 4
double calculate_double(double x) {
    // f(x) = (x^3 / 30) - (4 * x^2) + 50
    return (pow(x, 3) / 30.0) - (4 * pow(x, 2)) + 50;
}

int main() {
    double X1, X2, delta;   // X1 - початок відрізка, X2 - кінець, delta - крок
    unsigned int N;         // кількість точок для розрахунку
    int mode;               // режим вводу: 1 (через N) або 2 (через delta)

    // Вибір режиму
    printf("Choose input mode:\n");
    printf("1 - X1, X2, N\n");       // режим 1: вводимо початок, кінець і кількість точок
    printf("2 - X1, X2, delta\n");   // режим 2: вводимо початок, кінець і крок
    printf("Your choice: ");
    scanf("%d", &mode);              // зчитуємо вибір користувача

    // --- Режим 1 ---
    if (mode == 1) {
        printf("Enter X1: ");
        scanf("%lf", &X1);           // зчитуємо початкове значення
        printf("Enter X2: ");
        scanf("%lf", &X2);           // зчитуємо кінцеве значення
        printf("Enter number of points N: ");
        scanf("%u", &N);             // зчитуємо кількість точок

        if (N > 1) {
            // обчислюємо крок (delta) так, щоб відрізок розділити на N-1 частин
            delta = (X2 - X1) / (N - 1);
        } else {
            // якщо N <= 1, то таблицю побудувати неможливо
            printf("Error: N must be > 1\n");
            return 1; // завершуємо програму з помилкою
        }

    }
    // --- Режим 2 ---
    else if (mode == 2) {
        printf("Enter X1: ");
        scanf("%lf", &X1);           // зчитуємо початкове значення
        printf("Enter X2: ");
        scanf("%lf", &X2);           // зчитуємо кінцеве значення
        printf("Enter step delta: ");
        scanf("%lf", &delta);        // зчитуємо крок

        if (delta > 0) {
            // обчислюємо кількість точок (N)
            N = (unsigned int)((X2 - X1) / delta) + 1;
        } else {
            // якщо крок <= 0, то це помилка
            printf("Error: delta must be > 0\n");
            return 1;
        }

    }
    // --- Неправильний режим ---
    else {
        printf("Error: wrong mode.\n");
        return 1; // завершуємо програму з помилкою
    }

    // Вивід початкових даних
    printf("X1=%.2lf,  X2=%.2lf,  delta=%.2lf\n\n", X1, X2, delta);

    // Вивід заголовку таблиці
    printf("--------------------------------------------\n");
    printf("*   N   *    X    *    F(X)   *\n");
    printf("--------------------------------------------\n");

    int rowsPerPage = 9; // кількість рядків на одній "сторінці"
    for (unsigned int i = 0; i < N; i++) {
        double x = X1 + i * delta;   // обчислюємо чергове значення X
        double y = calculate_double(x);             // обчислюємо значення функції f(x)

        // вивід одного рядка таблиці: номер точки, X, F(X)
        printf("| %3u  | %6.2lf | %8.2lf |\n", i + 1, x, y);

        // якщо вивели 9 рядків і ще залишилися точки — робимо паузу
        if ((i + 1) % rowsPerPage == 0 && (i + 1) < N) {
            printf("--------------------------------------------\n");
            printf("Press Any Key to Continue ...\n");
            getchar(); // ловимо залишений символ '\n'
            getchar(); // чекаємо, поки користувач натисне клавішу
            printf("--------------------------------------------\n");
        }
    }

    // Завершальна лінія таблиці
    printf("--------------------------------------------\n");

    return 0; // завершення програми
}
